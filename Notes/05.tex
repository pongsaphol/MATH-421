\chapter{Integration}

\begin{center}
  \begin{tikzpicture}
    \draw[->] (-1, 0) -- (4.2, 0) node[right] {$x$};
    \draw[->] (0, -1) -- (0, 4.2) node[above] {$f(x)$};
    \draw[scale=1, domain=0:4, smooth, variable=\x] plot ({\x}, {\x^2/4});
    % \draw[dotted] (1, 0) -- (1, 0.25);
    \draw[dotted] (1, 0.25) -- (2, 0.25);
    % \draw[dotted] (2, 0) -- (2, 1);
    \draw[dotted] (2, 1) -- (3, 1);
    % \draw[dotted] (3, 0) -- (3, 2.25);
    \draw[dotted] (3, 2.25) -- (4, 2.25);
    % \draw[dotted] (4, 0) -- (4, 4);

    \draw[-] (1, 0.1) -- (1, -0.1) node[below] {$\frac{1}{4}$};
    \draw[-] (2, 0.1) -- (2, -0.1) node[below] {$\frac{1}{2}$};
    \draw[-] (3, 0.1) -- (3, -0.1) node[below] {$\frac{3}{4}$};
    \draw[-] (4, 0.1) -- (4, -0.1) node[below] {$1$};


    \draw[dotted] (0, 0) rectangle (1, 0.25);
    \draw[dotted] (1, 0) rectangle (2, 1);
    \draw[dotted] (2, 0) rectangle (3, 2.25);
    \draw[dotted] (3, 0) rectangle (4, 4);
  \end{tikzpicture}

  $f(x) = x^2$ defined on $[0, 1]$
\end{center}

\begin{enumerate}[label=\arabic*.]
  \item Given an interval $[a, b]$ and a function $f$ defined by $f: [a, b] \to \RR$
  , assume that $f$ is bounded (there is an $M$ such that $|f(x)| \leq M$ for all $x \in [a, b]$)
\end{enumerate}

\begin{definition*}
  A partition of $[a, b]$ is a finite collection of distinct numbers in $[a, b]$. 
  which contains the end point $a$ and $b$.

  We can order these 
  $$a = x_0 < x_1 < x_2 < \dotsc < x_N = b$$
  Are finement $\tilde{P}$ of partition $P$, is a partition which contains $P$ 
\end{definition*}

\begin{definition*}[Lower Riemann Sum]
 $$L(f, P) = \sum_{j=1}^N (x_j - x_{j-1})\cdot m_j$$
 $$m_j = \inf_{x_{j-1}\leq t\leq x_j}f(t)$$
  Lower Riemann sum, given $f$, and $P = \{x_0 <x_1 <\dotsc< x_N\}$, 
  $\inf$ is the greatest lower bound for $f$ on $[x_{j-1}, x_j]$,
  $m_j$ is the greatest lower bound for $f$ on the partition$[x_{j-1}, x_j]$
\end{definition*}

\begin{definition*}[Uower Riemann Sum]
  $$U(f, P) =\sum_{j=1}^N (x_j - x_{j-1})\cdot M_j$$
  $$M_j = \sup_{x_{j-1}\leq t\leq x_j}f(t)$$
  where $\sup$ is the least upper bound,
  $M_j$ is the least upper bound
\end{definition*}

the example $[a, b] = [0, 1]$
\[P=\left\{0, \frac{1}{N}, \frac{2}{N}, \dotsc, \frac{N}{N} = 1\right\}\]
where $x_j = \frac{j}{N}, 0\leq j \leq N$
\begin{align*}
  L(f, P) &= \sum_{j=1}^{N}\frac{1}{N}\left(\frac{j-1}{N}\right)^2 \\
  &= \frac{1}{N^3}\sum_{j=1}^{N} (j-1)^2 \\
  &= \frac{1}{N^3}(0^2 + 1^2 + 2^2 + \dotsc + (N-1)^2) \\
% \end{align*}
% \begin{align*}
  U(f, P) &= \sum_{j=1}^{N}\frac{1}{N}\left(\frac{j}{N}\right)^2 \\
  &= \frac{1}{N^3}\sum_{j=1}^{N} (j)^2 \\
  &= \frac{1}{N^3}(1^2 + 2^2 + \dotsc + N^2) \\
\end{align*}

What happens with $L(f, P)$ if we refine the partition?

What happens with $U(f, P)$ if we refine the partition?

\underline{\textbf{Proposition}}:if $P, \tilde{P}$ are partitions $P \subset \tilde{P}$ then 
$L(f, P) \leq L(f, \tilde{P})$ and $U(f, P) \geq U(f, \tilde{P})$

\begin{center}
  \begin{tikzpicture}
    \draw[->] (-1, 0) -- (4.2, 0) node[right] {$x$};
    \draw[->] (0, -1) -- (0, 4.2) node[above] {$f(x)$};
    \draw[scale=1, domain=0:4, smooth, variable=\x] plot ({\x}, {\x^2/4});
    \draw[dotted] (1, 0) -- (1, 0.25);
    \draw[dotted] (1, 0.25) -- (2, 0.25);
    \draw[dotted] (2, 0) -- (2, 1);
    \draw[dotted] (2.5, 0) -- (2.5, 1.5625);
    \draw[dotted] (2.5, 1.5625) -- (3, 1.5625);
    \draw[dotted] (2, 1) -- (3, 1);
    \draw[dotted] (3, 0) -- (3, 2.25);
    \draw[dotted] (3, 2.25) -- (4, 2.25);
    \draw[dotted] (4, 0) -- (4, 4);

    \draw[-] (1, 0.1) -- (1, -0.1) node[below] {$\frac{1}{4}$};
    \draw[-] (2, 0.1) -- (2, -0.1) node[below] {$\frac{1}{2}$};
    \draw[-] (2.5, 0.1) -- (2.5, -0.1) node[below] {$v$};
    \draw[-] (3, 0.1) -- (3, -0.1) node[below] {$\frac{3}{4}$};
    \draw[-] (4, 0.1) -- (4, -0.1) node[below] {$1$};


    % \draw[dotted] (0, 0) rectangle (1, 0.25);
    % \draw[dotted] (1, 0) rectangle (2, 1);
    % \draw[dotted] (2, 0) rectangle (3, 2.25);
    % \draw[dotted] (3, 0) rectangle (4, 4);
  \end{tikzpicture}

  $f(x) = x^2$ defined on $[0, 1]$
\end{center}

If we refine the partition by adding a point $\tilde{P} = P \cup \{v\}$

The key for the proof $x_{j-1}, x_j \in P$ take a new partition point $v$ between $x_{j-1}$ and $x_j$
\begin{align*}
  (x_j - x_{j-1}) \inf_{x_{j-1} \leq t \leq x_j} f(t) &= (x_j - v) \inf_{x_{j-1} \leq t \leq x_j} f(t) + (v - x_{j-1}) \inf_{x_{j-1} \leq t \leq x_j} f(t) \\
  &\leq (x_j - v) \inf_{v \leq t \leq x_j} f(t) + (v - x_{j-1}) \inf_{x_{j-1} \leq t \leq v} f(t) \\
\end{align*}

\begin{theorem*}
  Let $f$ be a bounded function on $[a, b]$. Then
  $$\sup_{P} L(f, P) \leq \inf_{P} U(f, P)$$
  where $\sup_{P}$ is supremum over all partition and $\inf_{P}$ is infimum over all partitions.
\end{theorem*}

\begin{definition*}
  Given the theorem, we say that $f$ is integrable (or Riemann integrable) if
  $$\sup_{P} L(f, P) = \inf_{P} U(f, P)$$
\end{definition*}

\begin{proof}
  \text{}
  \begin{enumerate}[(i)]
    \item If $P_1, P_2$ are two partitions then 
    $$L(f, P_1) \leq U(f, P_2)$$
    Key: Take a refinement $P$ of both $P_1, P_2$ where $P \supset P_1 \cup P_2$ then 
    $$L(f, P_1) \leq L(f, P) \leq U(f, P) \leq U(f, P_2)$$
    \item Conjecture: $U(f, P_2)$ is an upper bound for all $L(f, P)$ where $P$ is any partition
    so the least upper bound for the $L(f, P)$ cannot exceed $U(f, P)$ that menas 
    $$\sup_P L(f, P) \leq U(f, P_2)$$
    for any fixed partition

    For all partition $P_2$, the number $\displaystyle\sup_P L(f, P)$ is a lower bound for $U(f, P_2)$
    The greatest lower bound for the $U(f, P_2)$ cannot be smaller than $\displaystyle\sup_P L(f, P)$
    $$\implies \sup_P L(f, P) \leq \inf_P U(f, P)$$
  \end{enumerate}
\end{proof}

\begin{example*}
\[
  f(x) = \begin{cases}
    1 & \text{if } x \text{ is irrational on } [0, 1] \\
    0 & \text{if } x \text{ is rational on } [0, 1]
    \end{cases}
\]
Take any partition $P =\{0 = x_0 < x_1 < \cdots < x_n = 1\}$ on $[x_{j-1}, x_j]$
$$\inf_{[x_{j-1}, x_j]}f = 0\text{ and }\sup_{[x_{j-1}, x_j]}f = 1$$
$$L(f, P) = \sum_{j=1}^{N} (x_j - x_{j-1}) \cdot 0 = 0$$
$$U(f, P) = \sum_{j=1}^{N} (x_j - x_{j-1}) \cdot 1 = 1$$
So this function is not integrable
\end{example*} 

\begin{example*}
\[
  f(x) = \begin{cases}
    1 & \text{if } 0 < x < \frac{1}{2}\\
    0 & \text{if } \frac{1}{2} \leq x \leq 1
    \end{cases}
\] 

$$P = \left\{0, \frac{1}{2}, 1\right\}, \inf_{[0, \frac{1}{2}]} = 0, \sup_{[0, \frac{1}{2}]} f = 1$$
$$L(f, P) = 0\cdot\frac{1}{2} + \frac{1}{2} = \frac{1}{2}$$
$$U(f, P) = 1\cdot\frac{1}{2} + \frac{1}{2} = 1$$
We pick new points
$$x_0 = 0, x_1 = \frac{1}{2} - \frac{1}{N}, x_2 = \frac{1}{2}, x_3 = 1$$
$$L(f, P) = \left(\frac{1}{2} - \frac{1}{N}\right)\cdot 0 + \frac{1}{N}\cdot 0 + \frac{1}{2}\cdot 1 = \frac{1}{2}$$
$$U(f, P) = \left(\frac{1}{2} - \frac{1}{N}\right)\cdot 0 + \frac{1}{N}\cdot 1 + \frac{1}{2}\cdot 1 = \frac{1}{2} + \frac{1}{N}$$
$$\sup L(f, P) \ge \frac{1}{2}\text{ and } \inf U(f, P) \le \frac{1}{2} + \frac{1}{N}$$
$$\implies \sup L(f, P) = \inf U(f, P) = \frac{1}{2}$$
\end{example*}

\begin{example*}
  Define on $[0, 1]$

\[
  f(x) = \begin{cases}
    0 & \text{if } x \text{ is irrational}\\
    \frac{1}{q} & \text{if } x \text{ is rational}, x = \frac{p}{q}\text{ in lowest term}
    \end{cases}
\]

Question: Is $f$ integrable on $[0, 1]$?

Answer: Yes, and the integral is $0$
\end{example*}

\begin{proof}
  \underline{Claim} $f$ is integrable on $[0, 1]$, and $\int_{0}^{1} f =0$

  $L(f, P) = 0$ for all partitions $P$. Given $\eps > 0$ we have to find a partition $P_\eps$ such $U(f, P_\eps) < \eps$.

  Choose $N$ large, $\frac{1}{N} \ll \eps$
  Form a partition which contain the fractions $\frac{p}{q}$ (in lowest terms) such that $1 \le q \le N$
  
  Observe, there are no more than $N^2$ such numbers whenever
  $$\left|\frac{p}{q} - \frac{p'}{q'}\right| = \left|\frac{pq'-qp'}{qq'}\right| \ge \frac{1}{qq'} \ge \frac{1}{N^2}$$
  We choose the partition $P_\eps$ by including all $\frac{p}{q} \in [0, 1], 1 \le q \le N$ 
  and then for each of those, $v = \frac{p}{q}$, add $v - \frac{1}{N^3}, v+ \frac{1}{N^3}$

  Then number of partition point is $\le 3N(N+1)$

  Estimate $$U(f, P) = \sum_{j=1}^{M} (x_j - x_{j-1})M_j,\ M_j = \sup_{[x_{j-1}, x_j}f$$
  I have the estimate
  \begin{align*}
  (x_j - x_{j-1})M_j &\leq \max\left\{\frac{1}{N^3}, (x_j - x_{j-1})\frac{1}{N + 1}\right\} \\
  &\leq \frac{1}{N^3} + (x_j - x_{j-1})\frac{1}{N+1} \\
  \end{align*}

  \begin{align*}
    U(f, P) &\leq \sum_{j=1}^{M \leq 3N(N+1)} \frac{1}{N^3} + (x_j - x_{j-1})\frac{1}{N+1}\\
    &= \sum_{j=1}^{M} \frac{1}{N^3} + \sum_{j=1}^{M} (x_j - x_{j-1})\frac{1}{N+1}\\
    &= \frac{M}{N^3} + \frac{1}{N+1}\underbrace{\sum_{j=1}^{M} (x_j - x_{j-1})}_{= 1}\\
    &\leq \frac{3N(N+1)}{N^3} + \frac{1}{N+1}\\
  \end{align*}
\end{proof}

\section{Simple criteria for Riemann integrability}

% Criteria
\begin{theorem*}
  Let $f$ be a bounded function on $[a, b]$. Then $f$ is integrable if and only if for every $\eps > 0$
  there is a partition $P$, such that $$U(f, P) - L(f, P) < \eps$$
\end{theorem*}

Definition of Riemann integrable by if
$$\sup_{P_1} L(f_1, P_1) = \inf_{P_2} U(f_1, P_2)$$
then $f$ is Riemann integrable, and the (common) value is $$\int_{a}^{b}f $$

If $\tilde{P}$ is a refinement of $P$ then $L(f, \tilde{P}) \geq L(f, P)$ and $U(f, \tilde{P}) \leq U(f, P)$

\begin{proof}
  \text{}
  \begin{enumerate}[1.]
    \item Assume that $f$ is Riemann integrable.
    Let $\eps > 0$ there is a partition $P_1$ such that 
    $$\int_a^b f - \frac{\eps}{10} < L(f, P_1)$$
    There is a partition $P_2$ such that 
    $$U(f, P_2) < \int_a^b f+ \frac{\eps}{10}$$
    Then we get 
    $$\int_a^b f - \frac{\eps}{10} < L(f, P_1) \leq L(f, P_1\cup P_2) \leq U(f, P_1\cup P_2) \leq U(f, P_2) < \int_a^b f+ \frac{\eps}{10}$$
    $$\implies U(f, P_1 \cup P_2) - L(f, P_1 \cup P_2) < \frac{\eps}{5}$$
    \item Assume that for every $\eps > 0$, there is a partition $P$ such that
    $$U(f, P) - L(f, P) < \eps$$
    We want to show that $\displaystyle\inf_P U(f, P) - \displaystyle\sup_P L(f, P)$ differs by no more than $\eps$
    If I succeed, then we get (since $\eps > 0$ is arbitrary) that 
    $\displaystyle\inf_P U(f, P) = \displaystyle\sup_P L(f, P)$
    (i.e. by definition $f$ is Riemann integrable)

    We here shown $\inf U(f, P) \geq \sup L(f, P)$
    $$U(f, P_\eps) \ge \inf_{\text{all }P}U(f, P) \ge \sup _{\text{all }P}L(f, P) \ge L(f, P_\eps)$$
  \end{enumerate}
\end{proof}
\section{Continuous functions}

\begin{theorem*}
  A continuous function $f$ on $[a, b]$ is Riemann integrable
\end{theorem*}

Recall the defnition of continuity.
A function is continuous at $x_0 \in [a, b]$
$$\forall \eps > 0, \exists \delta > 0, |x-x_0| < \delta \implies |f(x) - f(x_0)| < \eps\ (\text{for }x \in [a, b])$$
Theorem: A continuous function on $[a, b]$ is uniformly continuous.

\begin{proof}
  $f$ is uniformly continuous, we \underline{want to check} for arbitrary $\eps > 0$
  that there is a partition $P$ such that $U(f, P) - L(f, P) < \eps$

  \underline{Know:} There is a $\delta > 0$ such that $|f(x_1) - f(x_2)| < \frac{\eps}{b-a}$ provided That $|x_1 - x_2| < \delta$

  $$P = \left\{x_j = a + j\frac{\eps}{b-a},\right\}, x_j-x_{j-1} = \frac{\eps}{b-a} = \delta$$

  \begin{align*}
    U(f, P) - L(f, P) &= \sum_{j=1}^{N} M_j \cdot (x_j - x_{j-1}) - \sum_{j=1}^{N} m_j \cdot (x_j - x_{j-1})\\
    &= \sum_{j=1}^{N} \underbrace{(M_j - m_j)}_{\leq \frac{\eps}{b-a}\cdot \frac{1}{100}} \cdot (x_j - x_{j-1})\\
    &\leq \sum_{j=1}^{N} \frac{\eps}{b-a}\cdot \frac{1}{100} \cdot (x_j - x_{j-1})\\
    &\leq \frac{\eps}{b-a}\cdot \frac{1}{100} \cdot (b-a)\\
    &= \frac{\eps}{100}
  \end{align*}
\end{proof}

\section{Estimation of integrals}

\begin{theorem*}
  If $f$ and $g$ are integrable on $[a, b]$ and if $f(x) \le g(x)$ for all $x \in [a, b]$ then
  $$\int_a^b f \le \int_a^b g$$
\end{theorem*}

\begin{proof}
  For any partition $P$ show that $L(f, P) \le F(g, P)$ and $U(f, P) \le U(g, P)$
  $$L(f, P) = \sum (x_j - x_{j-1}) \inf_{[x_{j-1}, x_j]} f$$
  $$U(f, P) = \sum (x_j - x_{j-1}) \sup_{[x_{j-1}, x_j]} f$$
  use that if $f(x) \le g(x)$ then 
  $$\inf_{[x_{j-1}, x_j]} f \le \inf_{[x_{j-1}, x_j]} g$$
  $$\sup_{[x_{j-1}, x_j} f \le \sup_{[x_{j-1}, x_j]} g$$
\end{proof}


% \begin{theorem*}
%   Given $f$, $-|f(x)| \le f(x) \le |f(x)|$
%   \[\int_a^b -|f| \le \int_a^b f \le \int_a^b |f|\]
% \end{theorem*}

% \begin{proof}
%   Use the following inequality for ?????? to show that $|f|$ is integrable
%   if $f$ is integrable 
%   \[\left||v|-|w|\right| \le |v-w|\]
% \end{proof}

\section{Class of Riemann Integrable functions}

\[ \mathcal{I}: f \mapsto \int_a^b f\]

$\mathfrak{R}(a, b) = $ class of Riemann integrable function

\begin{itemize}
  \item If $f, g \in \mathfrak{R}(a, b)$ then $f+g \in \mathfrak{R}(a, b)$

  If $f \in \mathfrak{R}(a, b)$ and $c \in \mathbb{R}$ then $cf \in \mathfrak{R}(a, b)$
  \item $\displaystyle\int_a^b f+g = \int_a^b f + \int_a^b g$

   $\displaystyle\int_a^b cf = c\int_a^b f$
\end{itemize}

The cast two properties say that 

$\mathcal{I} :\mathfrak{R}(a, b) \to \RR$ is \underline{linear}
$$\mathcal{I}(f, g) = \mathcal{I}(f) + \mathcal{I}(g)$$
$$\mathcal{I}(cf) = c\mathcal{I}(f)$$

Given afined partition

It is usually not true that $L(f + g, P) = L(f, P) + L(g, P)$

Suppose that $M_j(f) = \sup_{[x_{j-1}, x_j]} f(x)$ and $m_j(f) = \inf_{[x_{j-1}, x_j]} f(x)$
$$M_j(f + g) \le M_j(f) + M_j(g)$$
$$m_j(f + g) \ge m_j(f) + m_j(g)$$
$$L(f, P) + L(g, P) \le L(f+g, P) \le U(f + g, P) \le U(f, P) + U(g, P)$$

We get $M_j(cf) = cM_j(f)$ and $m_j(cf) = cm_j(f)$ if $c \ge 0$ and $M_j(-f) = -m_j(f)$

We recognized that $f, g$ are integrable and if $f(x) \le g(x)$ for all $x \in [a, b]$ then
\[\int_a^bf(x) \le \int_a^bg(x)\]
This is because $L(f, P) \le L(g, P)$ and $U(f, P) \le U(g, P)$

\begin{theorem*}
  If $f$ is integrable, so is $|f|$
\end{theorem*}

\begin{proof}
  Prove this by showing
  \[0 \le U(|f|, P) - L(|f|, P) \le U(f, P) - L(f, P)\]
  Check this and apply our integrability criteria

  Check that $M_j(|f|) - m_j(|f|) \le M_j(f) - m_j(f)$

  Given $\eps > 0$ 
  \begin{itemize}
    \item There is a $w$ such that $M_j \ge f(w) \ge M_j- \eps$
    \item There is a $z$ such that $m_j \ge f(z) \ge m_j- \eps$
  \end{itemize}
  We know that $||f(w)| - |f(z)|| \le |f(w) - f(z)|$
  \begin{align*}
  M_j(|f|) - m_j(|f|) &\le |f(w)| - |f(z)| + 2\eps \\
  &\le |f(w) - f(z)| \\
  &\le M_j(f) - m_j(f) \\
  \end{align*}
\end{proof}

As the result if
$-|f(x)| \le f(x) \le |f(x)|$ for all $x$ in $[a, b]$ then 
\[\int_a^b -|f(x)| \,dx \le \int_a^b f(x) \,dx \le \int_a^b |f(x)| \,dx\] 
So $\displaystyle\int_a^b f(x) \,dx$ has absolute value $\displaystyle\le \int_a^b |f(x)| \,dx$

\[\left|\int_a^b f(x) \,dx\right|\le\int_a^b |f(x)|\,dx\]

\[|f(x)| \le \underbrace{\sup_{w \in [a, b]} |f(w)|}_{\text{constant function which is larger than all }f(x)}\]
\[\int_a^b |f(x)| \,dx \le \int_a^b \sup_{[a, b]}|f| \,dx = (b-a) \sup_{[a, b]} |f| \]

We can use this to bound the integral of $f$ by the integral of $|f|$ and the supremum of $|f|$ over $[a, b]$

\begin{example*}
  \[\int_0^{\frac{1}{2}} \frac{\sin x}{x} \,dx \le \int_0^{\frac{1}{2}} 1 \,dx = \frac{1}{2} \]
  \[\int_0^{\frac{1}{2}} \frac{\sin x}{x + \frac{1}{10^6}e^{-x}} \,dx \le \frac{1}{2} \]
\end{example*}

\underline{Note}: prefer to write $\displaystyle\int_{[a, b]}$

\begin{theorem*}[Exercise]
  Let $f$ be integrable. Let $g$ be such that $f(x) = g(x)$ except at a finite number of points. 
  Then $g$ is integrable and 
  \[\int_a^b f = \int_a^b g\]
\end{theorem*}

\begin{theorem*}[Lebesgue]
  A subset $E$ of $[0, 1]$ is called a null set if for every $\eps > 0$ 
  there is a sequence  of intervals $I_j$ such $\sum length(I_j) < \eps$

  Lebesque states $f$ is Riemann integrable if and only if the set of discontinuities is a null sets.
\end{theorem*}

\section{Fundamental Theorem of Calculus}

\begin{theorem*}
  Given an interval $[a, b]$ and and integrable function on $[a, b]$, given $a < c < b$
  then $f$ is integrable on $[a, c]$ and integrable on $[c, b]$ and
  \[\int_a^b f = \int_a^c f + \int_c^b f \]
\end{theorem*}

\begin{proof}
  We work with partition $P$ of $[a, b]$, $c\in P$. 
  \[P = \{x_0 = a < x_1 < x_2 < \cdots < x_{M-1} < x_M = c < x_{M+1} < x_N = b\}\]
  $P = P' \cup P''$ where $P'$ is the partition of $[a, c]$ and $P''$ is the partition of $[c, b]$

  Then we get, 
  $L(f, P) = L(f, P') + L(f, P'')$ and 
  $U(f, P) = U(f, P') + U(f, P'')$
\end{proof}

\[ x \mapsto \int_a^x f = \int_a^x f(t) \,dt \]

\begin{example*}
  $[-1, 1]$
  \[ f(t) = \begin{cases}
    -1 & -1 \le t < 0 \\
    1 &  0 \le t \le 1
  \end{cases}
    \]
  \[ \int_{-1}^x f(t)\,dt = \begin{cases}
    -1(x-(-1)) = -(x+1) & -1 \le x < 0 \\
    -1+x & 0 \le x \le 1
  \end{cases}
  \]
  \[ F(x) = \begin{cases}
    -x-1 & -1 \le x < 0 \\
    x-1 & 0 \le x \le 1
  \end{cases} = -1+|x|
  \]
\end{example*}

Claim: If $f$ is integrable on $[a, b]$ the function $\displaystyle F(x) = \int_a^x f(t) \,dt$ is continuous on $[a, b]$

We show that $F(x+h) - F(x) \to 0$ as $h \to 0$.

$\displaystyle F(x+h) = \int_a^{x+h} f$ and 
$\displaystyle F(x) = \int_a^{x} f$

If $h > 0$, $$\displaystyle F(x+h) - F(x) = \int_a^x f + \int_x^{x+h} f - \int_a^x f = \int_x^{x+h} f$$

If $h < 0$, $$\displaystyle F(x+h) - F(x) = \int_a^{x+h} f -\left( \int_a^{x+h} f + \int_{x+h}^x f\right) = \int_{x+h}^{x} f$$

Precall: If $|f(x)| \le M$ then 
\[\left|\int_{a_1}^{a_2} f\right| \le M(a_2 - a_1)\]
\underline{apply this} to our $f$ which is bounded, There is some  $M$ such that $|f(t)| \le M$ for all $t$
\[\left|\int_{x}^{x+h} f\right| \le M|h|\]
\[\left|\int_{x+h}^{x} f\right| \le M|h|\]
Goes to $0$ as $h \to 0$

\begin{theorem*}[Fundamental theorem of calculus]
  If $f$ is integrable on $[a, b]$ and continuous at some point $c \in [a, b]$ then the function
  $F$, defined by $\displaystyle F(x) = \int_a^x f$ is differentiable at $c$, and $F'(c) = f(c)$ 
\end{theorem*}

\begin{proof}
  For $h > 0$,
  \begin{align*}
    \frac{F(c+h)-F(c)}{h} - f(c) &= \frac{1}{h}\int_c^{c+h} f - f(c) \\
    &= \frac{1}{h} \int_c^{c+h} f(t) \,dt - \frac{1}{h}\int_c^{c+h} f(c)\,dt \\
    &= \frac{1}{h} \int_c^{c+h}[f(t) - f(c)]\,dt \\
  \end{align*}
  Show that $\displaystyle \left|\frac{F(c+h) - F(c)}{h} - f(c)\right| < \eps$ if $h>0$ is small enough

  Know: There is a $\delta$ such $|f(t) - f(c)| < \eps$ provided $|t-c| < \delta$

  If $0  < h < \delta$ then 
  \begin{align*}
    \frac{1}{h} \int_c^{c+h} |f(t) - f(c)| &\le\frac{1}{h} \int_c^{c+h} \underbrace{|f(t)-f(c)|}_{\text{Integrate is } \le \eps \text{ if } 0 < h < \delta}\,dt \\ 
    &\le \frac{1}{h} \int_c^{c+h} \eps \,dt \\
    &= \eps
  \end{align*}
\end{proof}
% \[\int_a^x f(t)\,dt = -\int_x^a f(t)\,dt\]

\section{Logarithm function}

\begin{definition*}
  $\exp(x)$ is the unique differentiable function on $(-\infty, \infty)$  
  where $\exp'(x) = \exp(x)$ and $\exp(0) = 1$
\end{definition*}

\begin{example*}
  $x \in (0, \infty)$
  \[x \mapsto \log x = \int_1^x \frac{1}{t}\,dt\]
  \underline{Goal} To show this log is ``ln'' with preserves the properties $\ln(ab) = \ln a + \ln b$
\end{example*}

\begin{theorem*}
  $\log : (0, \infty) \to \RR$ satisfies $\log(xy) = \log x + \log y$ for all $x, y > 0$
\end{theorem*}

\begin{proof}
  FTC give us $\log'(x) = \frac{1}{x}$.
  Fix $y > 0$ then $F_1(x) = \log(xy)$, $F_2(x) = \log x + \log y$

  First check that $F_1'(x) = F_2'(x)$

  \[F_2'(x) = \frac{1}{x}\]
  \[F_1'(x) = \log'(xy) \frac{d}{dx}(xy) = \frac{1}{xy}y=\frac{1}{x}\]
  \[F_1(x) = F_2(x) + C(y)\]
  \underline{know} $\log 1 = 0$, by the definition
  \begin{align*}
    F_1(x) - F_2(x) = C(y) &= F_1(1) - F_2(1) \\
    &= \log(1-y) - (\log 1 + \log y)  = 0\\
  \end{align*}
  so we have $C(y) = 0$, so $F_1 = F_2$
\end{proof}

Range of log
\begin{itemize}
  \item know: $\log$ is increasing
  \item Want $\lim\limits_{x\to \infty} \log x = \infty$, $\lim\limits_{x\to 0^+} \log x = -\infty$
\end{itemize}
\begin{align*}
  \log(2^N) &= \int_1^{2^N} \frac{1}{t}\,dt \\
  &= \int_1^2 + \int_2^4 + \int_{2^2}^{2^3} + \cdots + \int_{2^{N-1}}^{2^N} \frac{1}{t}\,dt\\
  &= \sum_{K=1}^N \int_{2^{K-1}}^{2^K} \frac{1}{t}\,dt,\, \int_{2^{K-1}}^{2^K} \frac{1}{t}\,dt \ge \int_{2^{K-1}}^{2^K} \frac{1}{2^K}\,dt =\frac{1}{2}\\
  \implies \int_1^{2^N} \frac{1}{t}\,dt &\ge \frac{1}{2}N\\
\end{align*}
$\displaystyle\log(2^{-N}) = \int_1^{2^{-N}} \frac{1}{t}\,dt =-\int_{2^{-N}}^1 \frac{1}{t}\,dt$

want to show $\displaystyle\int_{2^{-N}}^1 \frac{1}{t}\,dt \to \infty$ if $N \to \infty$
\[\int_{2^{-N}}^1 \frac{1}{t}\,dt = \sum_{K=1}^{N} \int_{2^{-K}}^{2^{1-K}} \frac{1}{t}\,dt,\, \int_{2^{-K}}^{2^{1-K}} \frac{1}{t}\,dt \ge \int_{2^{-K}}^{2^{1-K}} \frac{1}{2^{1-K}}\,dt = \frac{1}{2}\]
\[ \implies \log(2^{-N}) \le -\frac{1}{2}N\]

We define $e$ as the unique $x$ for which $\log x = 1$

\begin{center}
  \begin{tikzpicture}
    \draw[->] (-1, 0) -- (4.2, 0) node[right] {$x$};
    \draw[->] (0, -1) -- (0, 4.2) node[above] {$f(x)$};
    \draw[scale=1, domain=0.3:3.5, smooth, variable=\x] plot ({\x}, {1/\x});
    \draw[dotted] (1, 1) -- (1, 0) node[below] {$1$};
    \draw[dotted] (2.7, 0.37) -- (2.7, 0) node[below] {$e$};
  \end{tikzpicture}
\end{center}

$\log^{-1}:(-\infty, \infty) \to (0, \infty)$ is $\exp$

$\exp(0) = 1$, 
$$\exp'(y) = \left.\frac{1}{\log(x)}\right|_{x=\exp(y)} = \left.\frac{1}{\frac{1}{x}}\right|_{x=\exp(y)}=\left.x\right|_{x=\exp{y}} = \exp(y)$$


\underline{claim}
$\exp(a+b) = \exp(a)\cdot\exp(b)$

verify the claim by applying the log to both sides
\begin{align*}
  \log(\exp(a+b)) &= a + b\\
  \log(\exp a \cdot \exp b) &= \log(\exp a) + \log(\exp b) = a + b
\end{align*}
$\exp(n) = \exp(1 + 1 + \dotsc + 1) = (\exp(1))^n = e^n$

\section{Review version of FTC}

$f$ is integrable on $[a, b]$
\[A(x) = \int_a^x f(t)\,dt \implies A \text{ is a continuous function}\]

\underline{FTC} If $c \in [a, b]$ and $f$ is continuous at $c$ then $A$ is differentiable at $c$ and $A'(c) = f(c)$

Compute
\[\frac{A(c+h) - A(c)}{h} = \frac{1}{h}\left[\int_a^{c+h}f - \int_a^c f\right] = \frac{1}{h}\int_c^{c+h}f \]
\[\frac{A(c+h) - A(c)}{h} - f(c) = \frac{1}{h}\int_c^{c+h}\left[f(t) - f(c)\right]\,dt\]
Compute for $h < 0$ ($-h = |h|$ if $h < 0$)

\[ \frac{A(c+h) - A(c)}{h} = \frac{1}{h} \left(-\int_{c+h}^c f(t)\,dt\right) = \frac{1}{|h|}\int_{c-|h|}^{c}f(t)\,dt\]

Let $\displaystyle G(x) = \int_x^b f(t)\,dt$, Assume $f$ is continuous

if $h > 0$
\[\frac{G(x+h) - G(x)}{h} = \frac{1}{h}\left[\int_{x+h}^b f - \int_x^h f\right] = \frac{1}{h}\left(-\int_x^{x+h}f\right) = -\frac{1}{h}\int_x^{x+h}f\]
if $h < 0$
\[\frac{G(x+h) - G(x)}{h} = \frac{1}{h}\left[\int_{x+h}^b f - \int_x^h f\right] = \frac{1}{h}\int_{x+h}^{x}f = -\frac{1}{|h|}\int^x_{x-|h|}f\]

\[\left.\frac{d}{dx}\int_x^b f(t)dt\right|_{x=c} = -f(c)\]
$a < b$
\[\int_b^a f(t)\,dt = -\int_a^b f(t)\,dt\]

\begin{theorem*}[Second version of FTC]
  Given a function $g$ which is differentiable on $[a, b]$ and assume $g'$ is continuous function
  Then 
  \[\int_a^b g'(t)\,dt = g(b) - g(a)\]
\end{theorem*}

\begin{proof}
  \underline{Goal} $\displaystyle F(x) = \int_a^x g'(t)\,dt$ and $G(x) = g(x) - g(a)$ is the same function

  Apply FTC (main version) we get $F'(x) = g'(x)$ and $G'(x) = g'(x)$

  $F(x) - G(x)$ differ only by a constant $F(x) = G(x) = C \implies C = F(a) - G(a) = 0$
\end{proof}

\begin{theorem*}[More sophisticated version of the second FTC]
  let $g$ be a function on $[a, b]$ which is differentiable such that $g'$ is integrable then 
  \[\int_a^b g'(t)\,dt = g(b) - g(a)\]
\end{theorem*}

\begin{proof}
  Idea is to examine lower and upper sums for the $g'$, and use the mean value theorem for derivatives
  
  Suppose that $P = [a = t_0 < t_1 < \dotsc < t_N = b]$ 
  \[L(g', P) = \sum_{j=1}^N (t_j - t_{j-1}m_j(g'))\]
  \[U(g', P) = \sum_{j=1}^N (t_j - t_{j-1}M_j(g'))\]
  where $\displaystyle m_j(g') = \inf_{t \in [t_{j-1}, t_j]} g'(t)$ and $\displaystyle M_j(g') = \sup_{t \in [t_{j-1}, t_j]} g'(t)$

  Mean value theorem applied in $[t_{j-1}, t_j]$ gives $$g(t_j) - g(t_{j-1}) = g'(\xi_j)(t_j - t_{j-1})$$ where $\xi_j$ is between $t_{j-1}$ and $t_j$
  \begin{align*}
    L(g', P) &= \sum_{j=1}^N (t_j - t_{j-1})m_j(g')\\
    &\leq \sum_{j=1}^N (t_j - t_{j-1})g'(\xi_j)\\
    &= \sum_{j=1}^N g(t_j) - g(t_{j-1})\\
    U(g', P) &= \sum_{j=1}^N (t_j - t_{j-1})M_j(g')\\
    &\geq \sum_{j=1}^N (t_j - t_{j-1})g'(\xi_j)\\
    &= \sum_{j=1}^N g(t_j) - g(t_{j-1})\\
  \end{align*}
  \begin{align*}
    \sum_{j=1}^{N}(g(t_j) - g(t_{j-1})) &= g(t_1) - g(t_0) + g(t_2) - g(t_1) + \dotsc + g(t_N) - g(t_{N-1})\\
    &= g(t_N) - g(t_0)\\
    &= g(b) - g(a)
  \end{align*}
  \[L(g', P) \le \sum_{j=1}^{N}(g(t_j) - g(t_{j-1})) \le U(g', P)\]
  \[L(g', P) \le g(b) - g(a) \le U(g', P)\]
\end{proof}

\begin{example*}
  Assume $f$ is continuous
  \[\frac{d}{dx}\int_0^{x^2} f(t) dt = ?\]
  let $\displaystyle F(w) = \int_0^w f(t)\,dt$ then $\displaystyle F(x^2) = \int_0^{x^2} f(t)\,dt$
  \begin{align*}
    \frac{d}{dx}F(x^2) &= F'(x^2) \frac{d}{dx}x^2\\
    &= f(x^2)2x\\
  \end{align*}
  Therefore
  \[\frac{d}{dx}\int_0^{g(x)} f(t) dt = f(g(x))g'(x)\]
\end{example*}

\section{Mean Value Theorem for Integrals}

\begin{theorem*}
  if $f$ is integrable on $[a, b]$ and if $m = f(x) = M$ for all $x \in [a, b]$ then
  \[\int_a^b f(t)\, dt = (b-a)\mu \]
  where $m \le \mu \le M$
  (in other words $\displaystyle \frac{1}{b-a}\int_a^b f(t) \,dt = \mu$)
\end{theorem*}

\begin{proof}
  Another way of expression 
  \[ m(b-a) \le \int_a^b f(t)\, dt \le M(b-a)\]
  Given any partition $P = \{a = t_0 < t_1 < \dotsc < t_N = b\}$
  \[ L(P, f) = \sum_{j=1}^N (t_j - t_{j-1}) \overbrace{\inf_{t_{j-1} \le t \le t_j} f(t)}^{m_j(f)}\]
  \[ U(P, f) = \sum_{j=1}^N (t_j - t_{j-1}) \overbrace{\sup_{t_{j-1} \le t \le t_j} f(t)}^{M_j(f)}\]
  We have that for all $j$, $m_j(f) \ge m$ and $M_j(f) \le M$

  We get 
  \[L(P, f) \ge \sum_{j=1}^N (t_j - t_{j-1})m = m(b-a)\]
  \[U(P, f) \le \sum_{j=1}^N (t_j - t_{j-1})M = M(b-a)\]
  \[m(b-a) \le L(P, f) \le \int_a^b f(t)\, dt \le U(P, f) \le M(b-a)\]
\end{proof}

\begin{theorem*}
  If $f$ is continuous on $[a, b]$ (thus certainly integrable) then there is a point $\xi \in [a, b]$
  such that 
  \[\int_a^b f(x)\,dx = (b-a)f(\xi)\]
\end{theorem*}

\begin{proof}
  Use that a continuous function on a closed and bounded interval $[a, b]$ has a minimum and a maximum
  Means there is a point $X_{max}$ so that $\sup_{x \in [a, b]} f = f(X_{max})$ and a point $X_{min}$ so that $\inf_{x \in [a, b]} f = f(X_{min})$.
  We call $M = \max_{[a, b]} f(x)$ and $m = \min_{[a, b]} f(x)$ then $M$ and $m$ are in the range of $f$.

  We have 
  \[\underbrace{m}_{\text{in the range of }f} \le \frac{1}{b-a}\int_a^b f(t)\,dt \le \underbrace{M}_{\text{in the range of }f}\]
  Use the intermediate value theorem to conclude that$\displaystyle \frac{1}{b-a}\int_a^b f(t)\,dt$ is in the range of $f$.
  i.e. there is $\xi \in [a, b]$ such that $\displaystyle f(\xi) = \frac{1}{b-a}\int_a^b f(t)\,dt$ 
\end{proof}

Counter example if $f$ is not continuous

\begin{example*}
  $f(x) = \lfloor x \rfloor$ on $[0, 2]$
  \[ f(x) = \begin{cases}
  0 & \text{if }  0 \le x < 1 \\
  1 & \text{if } 1 \le x < 2 \\ 
  2 & \text{if } x = 2 \\  
  \end{cases}  \]
  \[\int_0^2 f(x)\,dx = \int_0^1 f(x)\,dx + \int_1^2 f(x)\,dx = 1 = \frac{1}{2}\underbrace{(b-a)}_{=2} \]
\end{example*}


\begin{theorem*}
  Given a function $g$ that is integrable nad non-negative. 
  Given a continuous function $f$ on $[a, b]$ 
  \[\int_a^b f(x)g(x)\,dx = f(\xi)\int_a^b g(x)\,dx\]
  for some $\xi \in [a, b]$, in other words
  \[ f(\xi) = \frac{1}{\int_a^b g(x)\,dx} \displaystyle\int_a^b f(x)g(x)\,dx\]
\end{theorem*}

\begin{proof}
  If $g(x) = 1$ for all $x$ we get the previous theorem.

  Let $m = \min_{[a, b]} f$ and $M = \max_{[a, b]} f$
  \[ \int_a^b f(x)g(x)\,dx \ge \int_a^b mg(x)\,dx = m\int_a^bg(x)\,dx\]
  \[ \int_a^b f(x)g(x)\,dx \le \int_a^b Mg(x)\,dx = M\int_a^bg(x)\,dx\]
  Assume $\displaystyle \int_a^b g(x)\, dx > 0$
  \[m \le \underbrace{\frac{\displaystyle\int_a^b f(x)g(x)\,dx}{\displaystyle\int_a^b g(x) \,dx}}_{\text{this is a value } f(\xi)} \le M\]
\end{proof}

\section{Example on Function}

If $f$ is integrable and $f \ge 0$ everywhere.
Suppose I know that $\int_a^b f(x)\,dx = 0$
what can we say about $f$?
(If $f$ is continuous implies that $f$ is a zero function)

\begin{example*}
  $f$ defined on $(-1, 1)$
  \[ f(x) = \begin{cases}
    0 & x\le 0 \\
    x^a\sin\left(\frac{1}{x^c}\right) &  x > 0 \\
  \end{cases}
  \]
  \textbf{Questions}
  \begin{enumerate}
    \item Is $f$ bounded?

    \textbf{No}, if $a$ is negative, i.e., $a < 0, c > 0$

    Bounded, there is $M$ such that $|f(x)| \le M$,
    consider the choices of $x_k$
    \footnote{$\sin 2k\pi = 0$ and $\sin\left(2k\pi + \frac{\pi}{2}\right) = 1$}
    \[\frac{1}{x_k^c} = 2k\pi + \frac{\pi}{2} \iff x_k\left(\frac{1}{2k\pi + \frac{\pi}{2}}\right)^{\frac{1}{c}} (k \ge 1)\]
    \begin{align*}
    f(x_k) &= x_k^a (a < 0) \\ 
      &= (2k\pi + \frac{\pi}{2})^{\overbrace{\frac{(-a)}{c}}^{a < 0}} \\
    \end{align*}

    Given $M$, I claim that for largn enough $k$ we have $|f(x_k)| > M$
    \[ f(x_k) =\left(2k\pi + \frac{\pi}{2}\right)^b > M, 2k\pi + \frac{\pi}{2} > M^{\frac{1}{b}}\]
    $b = \frac{(-a)}{c} > 0$

    \textbf{No}, if $a < 0, c = 0$

    \textbf{Yes}, if $a = 0, c \in \RR$

    $a < 0, c < 0, c = -b, b > 0$

    $|x^a \sin(x^b)| \le x^{a + b}\text{ for } x > 0$ \footnote{$|\sin w| \le |w|$}

    If $a + b \ge 0$ (i.e., $a - c \ge 0$)

    \textbf{Yes}, if $a < 0, c \le a$

    \textbf{No}, if $a < 0, c > a$
    \item Is $f$ continuous at $x = 0$?

    $|x^a \sin(x^{-c})| \le x ^ {a - c}$, continuity, $\lim\limits_{x \to 0} f(x) = 0$ if $a - c > 0$
    $\lim\limits_{x \to 0} f(x) = 0$ if $a > 0$

    If $a = 0, c > 0$, $f(x) = \sin\left(\frac{1}{x^c}\right)$ for $x > 0$ 

    If $x_k = \left(\frac{1}{2k\pi + \frac{\pi}{2}}\right)^{\frac{1}{c}}$ then $f(x_k) = 1$

    If $x_k = \left(\frac{1}{2k\pi}\right)^{\frac{1}{c}}$ then $f(x_k) = 0$

    $f$ does not have the limit $0$ as $x \to 0$ means: there exists an $\eps > 0$ such that there is no $\delta$ with $|f(x) - \underbrace{f(0)}_{=0}| < \eps$

    \textbf{No} if $a \le 0, c \ge 0$
    \item Is $f$ differentiable at $0$?
    \[\frac{f(h) - \underbrace{f(0)}^{= 0}}{h} = \begin{cases}
      0 & h < 0 \\ 
      h^{a-1}\sin\left(\frac{1}{h^c}\right) & h > 0
    \end{cases}\]
    $\lim\limits_{h \to 0} h^{a-1}\sin\left(\frac{1}{h^c}\right) = 0$ if $a > 1$, does not exists if $a = 1$

    \textbf{Yes} If $c \ge 0, a - 1 > 0$
    \item Is $f'$ bounded?

    If $a > 1$, then $f$ is differentiable and 
    \[f'(x) = \begin{cases}
      0 & x \le 0 \\ 
      ax^{a-1}\sin(x^{-c}) + x^a\cos(x^{-c})(-c)x^{-c-1} & x > 0
    \end{cases}\]

    $a > 1$, unbounded $a - c - 1 \ge 0$

    \textbf{Yes} If $a > 1$ and $a - c - 1 \le 0$
    \item Is $f'$ continuous at $x = 0$?
    \[f'(x) = \begin{cases}
      0 & x \le 0 \\ 
      \underbrace{ax^{a-1}\sin(x^{-c})}_{|\text{ }| \le a|x|^{a-1}} + x^a\cos(x^{-c})(-c)x^{-c-1} & x > 0
    \end{cases}\]
    
    \textbf{Yes} If $a > 1$, $a - c - 1 > 0$
  \end{enumerate}
\end{example*}

\section{Substitution Rule}
Rule on how to compute integrals directly reflected to chain rule

\begin{theorem*}
Given 
\begin{enumerate}[-]
  \item $g : [a, b]$, assuming that $g$ is differentiable and $g'$ is continuous 
  \item $f$ which is defined on an interval containing the range of $g$, $f$ is continuous
\end{enumerate}

Then \[\displaystyle\int_a^b f(g(t))g'(t)\,dt = \int_{g(a)}^{g(b)} f(u)\,du\]
\end{theorem*}

\begin{proof}
  Let $\displaystyle F_1(x) = \int_a^x f(g(t))g'(t)\,dt$ and $\displaystyle F_2(x) = \int_{g(a)}^{g(x)} f(u)\,du$

  Since $F_1, F_2$ is continuous, so, we can compute the derivative
  \[F_1'(x) = f(g(x))g'(x) \text{ by FTC} \]
  Define $\displaystyle A(w) = \int_{g(a)}^w f(u)\,du$. Then $F_2(x) = A(g(x))$

  By the cain rule $F_2'(x) = A'(g(x))g'(x) = f(g(x))g'(x)$

  $A(w) = f(w)$ by again FTC

  We see that $F_1(x) - F_2(x)$ is constant, inparticular equal to $F_1(a) - F_2(a) = 0$
\end{proof}

\begin{example*}
  \[\int_0^3 x \sin(x^2) \, dx\]
  Let $g(x) = x^2$, $g'(x) = 2x$ and $g(x) = x^2$
  \begin{align*}
  \int_0^3 x \sin(x^2) \, dx &= \frac{1}{2} \int_0^3 2x \sin(x^2)\,dx \\
  &= \frac{1}{2} \int_{0^2}^{3^2} \sin(u)\, du \\
  &= \frac{1}{2}(-\cos(3^2) + \cos(0^2)) \\
  \end{align*}
\end{example*}

\section{Integration by Parts}
is related to the product rule
\begin{theorem*}
  Given $f, g$ both differentiable, with $f', g'$ continuous in $[a, b]$
  Then
  \[\int_a^b f(x)g'(x)\,dx = f(b)g(b) - f(a)g(a) - \int_a^b f'(x)g(x)\,dx\]
\end{theorem*}

\begin{proof}
  \begin{align*}
    \int_a^b f(x)g'(x)\,dx + \int_a^b f(x)g'(x)\, dx &= \int_a^b f(x)g'(x) + f'(x)g(x)\, dx \\
    &= \int_a^b (f(x)g(x))'\, dx \\
    &= f(b)g(b) - f(a)g(a)
  \end{align*}
\end{proof}

\begin{example*}
Given a nice function $f(x)$ on an interval $[a, b]$ ($f, f'$ are continuous on $[a, b]$)
\[\int_a^b f(x)\cos(Nx)\, dx\]
what can we say about the size of this integral?

Standard estimate: assume $a < b$, then 
\[\left|\int_a^b f(x)\cos(Nx)\,dx\right| \le \int_a^b |f(x)|\,dx \le (b-a)\cdot \max|f|\]
We know $N\cos Nx = (\sin Nx)'$
\begin{align*}
  \int_a^b f(x)\cos Nx\, dx &= \frac{1}{N} \int_a^b f(x)(\sin(Nx))'\,dx \\
  &= \frac{1}{N}\left[f(b)(\sin(Nb)) - f(a)(\sin Na) - \int_a^b f'(x)\sin Nx\, dx\right]
\end{align*}
\[\left|\int_a^b f'(x)\sin Nx\, dx \right| \le (b-a)\cdot \max|f'|\]
\end{example*}

\begin{example*}
Try to estimate 
\begin{align*}
  \int_A^B f(x)\sin(x^2) \,dx =  \int_A^B \frac{f(x)}{2x}\underbrace{2x\sin(x^2)}_{\frac{d}{dx}(\sin x^2)} \,dx 
\end{align*}
\end{example*}
